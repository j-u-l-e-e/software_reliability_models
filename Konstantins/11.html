<!DOCTYPE html>
<html lang="lv">
<script type="text/javascript">
function checkOne(N,n){
	if (N >= n && n >= 0){
		return true;
	} else {
		return false;
	}
}

function checkTwo(M,m){
	if (M >= m && m >= 0){
		return true;
	} else {
		return false;
	}
}

function checkThree(k,n,m){
	if (k >= 0 && k >= parseInt(n)+parseInt(m)){
			return true;
	}
	return false;
}

function Lipova() {
	N = parseInt(document.getElementById("errCountInProg").value);
	M = parseInt(document.getElementById("overallBroughtErrorCount").value);
	k = parseInt(document.getElementById("testsCountUsedForTesting").value);
	n = parseInt(document.getElementById("ownErrorCount").value);
	m = parseInt(document.getElementById("broughtErrorCount").value);
	document.getElementById("result").style.color = "black";
	
	if (N < 0 ){
            document.getElementById("result").innerHTML = "Dabīgo kļūdu skaits programmā nevar būt mazāk par nulli!!!";
            document.getElementById("result").style.color = "red";
            return;
        }
    if (M < 0){
            document.getElementById("result").innerHTML = "Ienesto kļūdu skaits mazāk par nulli!!!";
            document.getElementById("result").style.color = "red";
            return;
        }

    if (n < 0){
            document.getElementById("result").innerHTML = "Dabīgo kļūdu skaits nevar būt mazāk par nulli!!!";
            document.getElementById("result").style.color = "red";
            return;
	}
	
	if (n === 0){
		document.getElementById("result").innerHTML = "Dalīšana uz nulli!!!";
		document.getElementById("result").style.color = "red";
		return;
	}

    if (m < 0){
            document.getElementById("result").innerHTML = "Mākslīgo kļūdu skaits nevar būt mazāk par nulli!!!";
            document.getElementById("result").style.color = "red";
            return;
	}

    if (k < 0){
            document.getElementById("result").innerHTML = "Testēšanai lietoto testu skaits nevar būt mazāk par nulli!!!";
            document.getElementById("result").style.color = "red";
            return;
	}
	
	if (N === '' || M === '' || k === '' || n === '' || m === '' || k === ''){
		document.getElementById("result").style.color = "red";
		document.getElementById("result").innerHTML = "Ievadiet visus nepieciešamus datus!!!";		
		return;
	} else {
		if (!checkOne(N,n)){
			document.getElementById("result").style.color = "red";
			document.getElementById("result").innerHTML = "Pirmais nosacījums nav izpildīts!";
			return;
		}
		if (!checkTwo(M,m)){
			document.getElementById("result").style.color = "red";
			document.getElementById("result").innerHTML = "Otrais nosacījums nav izpildīts!";
			return;
		}
		if (!checkThree(k,n,m)){
			document.getElementById("result").style.color = "red";
			document.getElementById("result").innerHTML = "Trešais nosacījums nav izpildīts!";
			return;
		}
		q = (n+m)/n;
		res = k / (n+m);
		res = res * Math.pow(q,n+m);
		res = res * Math.pow((1-q),k-n-m);
		res = res * ((N/n) * (M/m)) / ((N+M) / (n+m));
		document.getElementById("result").innerHTML = res.toFixed(2);
		document.getElementById("qId").innerHTML = q.toFixed(2);
	}
}
</script>

<head>
    <title>Lipova modelis</title>
    <meta charset="UTF-8">
	<script type="text/javascript" src="http://latex.codecogs.com/latexit.js"></script>
</head>
<body>

<h1>Lipova modelis</h1>
<br/>
<div><font size="5">Dabīgu <b>n</b> un mākslīgu <b>m</b> kļūdu atrašanas varbūtība:</font></div>
<br/>
<font lang="latex">Q(n,m) = ( \frac{k}{n+m} ) * q^{n+m} * (1-q)^{k-n-m} * \frac{ \frac{N}{n} \times \frac{M}{m} }{\frac{N+M}{n+m}}</font>
<br/>
<h2>Modeļa lietošanai ir jāievēro nosacījumi:</h2>
<ol>
	<li>
		<div lang="latex">N \geq n \geq 0,</div>
	</li>
	<li>
		<div lang="latex">M \geq m \geq 0, </div>
	</li>
	<li>
		<div lang="latex">k \geq n + m \geq 0</div>
	</li>
</ol>
<br/>
<h3>Lūdzu, ievadiet datus izskaitļošanai:</h3>
<table>
    <tr>
        <td><label for="errCountInProg">N - Dabīgo kļūdu skaits programmā:</label></td>
        <td><input id="errCountInProg" type="number" min="0" step="1"></td>
    </tr>
	
	<tr>
		<td><label for="overallBroughtErrorCount">M - Ienesto kļūdu skaits:</label></td>
		<td><input id="overallBroughtErrorCount" type="number" min="0" step="1"></td>
	</tr>
	
	<tr>
		<td><label for="testsCountUsedForTesting">k - Testēšanai lietoto testu skaits:</label></td>
		<td><input id="testsCountUsedForTesting" type="number" min="0" step="1"></td>
	</tr>
	
	<tr>
		<td><label for="ownErrorCount">n - Dabīgo kļūdu skaits:</label></td>
		<td><input id="ownErrorCount" type="number" min="0" step="1"></td>
	</tr>
	
	<tr>
		<td><label for="broughtErrorCount">m - Mākslīgo kļūdu skaits:</label></td>
		<td><input id="broughtErrorCount" type="number" min="0" step="1"></td>
	</tr>
	
	<tr>
		<td><label for="qId">q - Kļūdas atrašanas varbūtība katrā no k testiem, q= (n+m)/n:</label></td>
		<td><span id="qId"></span></td>
	</tr>
</table>
<br/>
<button onclick="Lipova()">Atrisināt</button>
<br />
<br />
Rezultāts: <span id="result"></span>
</body>
</html>